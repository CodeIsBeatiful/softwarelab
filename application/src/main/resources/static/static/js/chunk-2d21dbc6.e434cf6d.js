(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21dbc6"],{d323:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{ref:"terminal",attrs:{id:"terminal"}})])},r=[],o=(n("ac6a"),n("28a5"),n("fcf3")),s=n("47d0"),c=n("408b"),a=n("5f87"),d=n("ed08"),l=(n("abb2"),{name:"WebShell",data:function(){return{socket:"",term:null,id:Object(d["d"])(window.location.href).id,token:Object(a["a"])()}},mounted:function(){var t=this;this.term=new o["Terminal"]({cursorBlink:!0}),this.fitAddon=new s["FitAddon"],this.term.loadAddon(this.fitAddon),this.term.loadAddon(new c["WebLinksAddon"]),this.term.open(this.$refs.terminal),this.fitAddon.fit(),this.term.focus(),this.socket=new WebSocket("ws://"+Object(d["c"])()+"/api/ws/terminal/".concat(this.id,"?token=").concat(this.token,"&cols=").concat(this.term.cols,"&rows=").concat(this.term.rows));var e=this;this.socket.addEventListener("message",(function(t){console.info(t.data);var n=JSON.parse(t.data),i=n.detail.split("\n");i.length>0&&0===i[i.length-1].length&&i.pop(),i.forEach((function(t){"error"===n.type?e.term.writeln("[1;3;31m"+t+"[0m"):e.term.writeln("[1;3;32m"+t+"[0m")})),e.term.prompt()})),this.cache=[],this.term.prompt=function(){t.term.write("\r\n$ ")},this.term.writeln("Welcome to Software Lab"),this.term.writeln("Software Lab allows you to quickly get an application with one click"),this.term.writeln(""),this.term.prompt(),this.term.onKey((function(e){var n=e.domEvent,i=!n.altKey&&!n.ctrlKey&&!n.metaKey;13===n.keyCode?(t.socket.send(t.cache.join("")),t.term.writeln(""),t.cache=[]):8===n.keyCode?(t.cache.pop(),t.term._core.buffer.x>2&&t.term.write("\b \b")):i&&(t.term.write(e.key),t.cache.push(e.key))})),window.addEventListener("resize",this.debounce(this.resizeScreen,1500),!1)},methods:{debounce:function(t,e){var n=null;return function(){null!==n&&clearTimeout(n),n=setTimeout(t,e)}},resizeScreen:function(){this.fitAddon.fit(),this.socket.send(JSON.stringify([this.term.cols,this.term.rows]))}}}),h=l,m=n("2877"),u=Object(m["a"])(h,i,r,!1,null,null,null);e["default"]=u.exports}}]);